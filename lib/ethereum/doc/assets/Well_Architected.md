# Well-Architected Card

This is the Well-Architected card for Ethereum nodes implementation of the AWS Blockchain Node Runner app. This card takes into account questions from the [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/) which are relevant to this workload.

| Pillar                  | Control                           | Question                                                  | Remarks          |
|:------------------------|:----------------------------------|:----------------------------------------------------------|:-----------------|
| Security                | Network protection                | Are there unnecessary open ports in security groups?      | Please note that Erigon snap sync port remains open for non-erigon clients, i.e. Port 42069 (TCP/UDP).  |
|                         |                                   | Traffic inspection                                        | WAF could be implemented for traffic inspection. Additional charges will apply.  |
|                         | Compute protection                | Reduce attack surface                                     | This solution uses Amazon Linux 2 AMI. You may choose to run hardening scripts on it.  |
|                         |                                   | Enable people to perform actions at a distance            | This solution uses Systems Manager for terminal session, not ssh ports.  |
|                         | Data protection at rest           | Use encrypted EBS volumes                                 | This solution uses encrypted EBS volumes.  |
|                         |                                   | Use encrypted S3 buckets                                  | This solution uses SSE-S3 encryption.  |
|                         | Data protection in transit        | Use TLS                                                   | Load balancer currently uses HTTP. Create HTTPS listener with self signed certificate if TLS is desired.  |
|                         | Authorization and access control  | Use instance profile with EC2                             | This solution uses IAM role instead of IAM user.  |
|                         |                                   | Following principle of least privilege access             | In sync node, root user is not used (using special user "ethereum" instead").  |
|                         | Application security              | Security focused development practices                    | cdk-nag is being used with appropriate suppressions.  |
| Cost optimization       | Service selection                 | Use cost effective resources                              | Graviton instances are being used, which are cost effective compared to Intel/AMD instances.  |
|                         | Cost awareness                    | Estimate costs                                            | One sync node with m7g.2xlarge for geth-lighthouse configuration (2048GB ssd) will cost around US$430 per month in the US East (N. Virginia) region. Additional charges will apply if you choose to deploy RPC nodes with load balancer. |
| Reliability             | Resiliency implementation         | Withstand component failures                              | This solution uses Application Load Balancer with RPC nodes for high availability. If sync node fails, S3 backup can be used to reinstate the nodes.  |
|                         | Data backup                       | How is data backed up?                                    | Data is backed up to S3 using s5cmd tool.  |
|                         | Resource monitoring               | How are workload resources monitored?                     | Resources are being monitored using CloudWatch dashboards. CloudWatch custom metrics are being pushed via CloudWatch Agent.  |
| Performance efficiency  | Compute selection                 | How is compute solution selected?                         | Compute solution is selected based on best price-performance, i.e. Graviton based instances.  |
|                         | Storage selection                 | How is storage solution selected?                         | Storage solution is selected based on best price-performance, i.e. gp3 volumes with optimal IOPS and throughput.  |
|                         | Architecture selection            | How is the best performance architecture selected?        | s5cmd tool has been chosen for S3 uploads/downloads because it gives better price-performance compared to EBS snapshots (including Fast Snapshot Restore, which is expensive).  |
| Operational excellence  | Workload health                   | How is health of workload determined?                     | Health of workload is determined via Application Load Balancer Target Group Health Checks, on port 8545.  |
| Sustainability          | Hardware & services               | Select most efficient hardware for your workload          | This solution uses AWS Graviton-based instances which offer the best performance per watt of energy use in Amazon EC2.  |